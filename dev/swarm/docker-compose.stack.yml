networks:
  blockchain_net:
    attachable: true
    driver: overlay
services:
  ca0:
    command: sh -c "fabric-ca-server start --cfg.identities.allowremove --cfg.affiliations.allowremove
      --registry.maxenrollments -1 --ca.certfile /etc/hyperledger/fabric-ca-server-config/ca.org1.foo.com-cert.pem
      --ca.keyfile /etc/hyperledger/fabric-ca-server-config/a130e21ff7e0b9e120a671c1956538d16128657ba16608c2d03d2911e71a63a7_sk
      -b admin:adminpw -d"
    container_name: ca.foo.com
    deploy:
      restart_policy:
        condition: on-failure
    environment:
      FABRIC_CA_HOME: /etc/hyperledger/fabric-ca-server
      FABRIC_CA_SERVER_CA_NAME: ca-org1
      FABRIC_CA_SERVER_TLS_CERTFILE: /etc/hyperledger/fabric-ca-server-config/ca.org1.foo.com-cert.pem
      FABRIC_CA_SERVER_TLS_ENABLED: "false"
      FABRIC_CA_SERVER_TLS_KEYFILE: /etc/hyperledger/fabric-ca-server-config/a130e21ff7e0b9e120a671c1956538d16128657ba16608c2d03d2911e71a63a7_sk
    expose:
    - '7054'
    image: hyperledger/fabric-ca:x86_64-1.1.0
    networks:
      blockchain_net:
        aliases:
        - ca.foo.com
    ports:
    - published: 7054
      target: 7054
    volumes:
    - /opt/gopath/src/github.com/hyperledger/fabric/network_resources/dev/swarm/fabric-configs/v1.1/crypto-config/peerOrganizations/org1.foo.com/ca:/etc/hyperledger/fabric-ca-server-config:ro
  ca1:
    command: sh -c "fabric-ca-server start --registry.maxenrollments -1 --ca.certfile
      /etc/hyperledger/fabric-ca-server-config/ca.org2.bar.com-cert.pem --ca.keyfile
      /etc/hyperledger/fabric-ca-server-config/4c6d79e99a006464b63f9d0cfabef643206a38138344a4ee804c06f99282e246_sk
      -b admin:adminpw -d"
    container_name: ca.bar.com
    deploy:
      restart_policy:
        condition: on-failure
    environment:
      FABRIC_CA_HOME: /etc/hyperledger/fabric-ca-server
      FABRIC_CA_SERVER_CA_NAME: ca-org2
      FABRIC_CA_SERVER_TLS_CERTFILE: /etc/hyperledger/fabric-ca-server-config/ca.org2.bar.com-cert.pem
      FABRIC_CA_SERVER_TLS_ENABLED: "false"
      FABRIC_CA_SERVER_TLS_KEYFILE: /etc/hyperledger/fabric-ca-server-config/4c6d79e99a006464b63f9d0cfabef643206a38138344a4ee804c06f99282e246_sk
    expose:
    - '7054'
    image: hyperledger/fabric-ca:x86_64-1.1.0
    networks:
      blockchain_net:
        aliases:
        - ca.bar.com
    ports:
    - published: 8054
      target: 7054
    volumes:
    - /opt/gopath/src/github.com/hyperledger/fabric/network_resources/dev/swarm/fabric-configs/v1.1/crypto-config/peerOrganizations/org2.bar.com/ca:/etc/hyperledger/fabric-ca-server-config:ro
  ccenv:
    container_name: ccenv
    deploy:
      restart_policy:
        condition: on-failure
    image: hyperledger/fabric-ccenv:x86_64-1.1.0
    networks:
      blockchain_net: null
  configtxlator:
    command: /usr/local/bin/configtxlator start
    container_name: configtxlator.com
    deploy:
      restart_policy:
        condition: on-failure
    image: hyperledger/fabric-tools:x86_64-1.1.0
    networks:
      blockchain_net:
        aliases:
        - configtxlator.com
    ports:
    - published: 7059
      target: 7059
  couchdb0:
    container_name: couchdb0
    deploy:
      placement:
        constraints:
        - node.hostname == dev-010
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      COUCHDB_PASSWORD: ''
      COUCHDB_USER: ''
    expose:
    - '5984'
    image: hyperledger/fabric-couchdb:x86_64-0.4.6
    networks:
      blockchain_net:
        aliases:
        - couchdb0
    ports:
    - published: 5984
      target: 5984
  couchdb1:
    container_name: couchdb1
    deploy:
      placement:
        constraints:
        - node.hostname == dev-020
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      COUCHDB_PASSWORD: ''
      COUCHDB_USER: ''
    expose:
    - '5984'
    image: hyperledger/fabric-couchdb:x86_64-0.4.6
    networks:
      blockchain_net:
        aliases:
        - couchdb1
  couchdb2:
    container_name: couchdb2
    deploy:
      placement:
        constraints:
        - node.hostname == localhost.localdomain
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      COUCHDB_PASSWORD: ''
      COUCHDB_USER: ''
    expose:
    - '5984'
    image: hyperledger/fabric-couchdb:x86_64-0.4.6
    networks:
      blockchain_net:
        aliases:
        - couchdb2
  couchdb3:
    container_name: couchdb3
    deploy:
      placement:
        constraints:
        - node.hostname == dev-040
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      COUCHDB_PASSWORD: ''
      COUCHDB_USER: ''
    expose:
    - '5984'
    image: hyperledger/fabric-couchdb:x86_64-0.4.6
    networks:
      blockchain_net:
        aliases:
        - couchdb3
  kafka0:
    container_name: kafka0
    depends_on:
    - zookeeper0
    - zookeeper1
    - zookeeper2
    deploy:
      placement:
        constraints:
        - node.hostname == dev-010
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      KAFKA_BROKER_ID: 0
      KAFKA_DEFAULT_REPLICATION_FACTOR: 3
      KAFKA_MESSAGE_MAX_BYTES: 103809024
      KAFKA_MIN_INSYNC_REPLICAS: 2
      KAFKA_REPLICA_FETCH_MAX_BYTES: 103809024
      KAFKA_UNCLEAN_LEADER_ELECTION_ENABLE: "false"
      KAFKA_ZOOKEEPER_CONNECT: 192.168.33.71:2181,192.168.33.72:2181,192.168.33.74:2181
    image: hyperledger/fabric-kafka:x86_64-0.4.6
    networks:
      blockchain_net: null
    ports:
    - target: 9092
  kafka1:
    container_name: kafka1
    depends_on:
    - zookeeper0
    - zookeeper1
    - zookeeper2
    deploy:
      placement:
        constraints:
        - node.hostname == dev-020
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      KAFKA_BROKER_ID: 1
      KAFKA_DEFAULT_REPLICATION_FACTOR: 3
      KAFKA_MESSAGE_MAX_BYTES: 103809024
      KAFKA_MIN_INSYNC_REPLICAS: 2
      KAFKA_REPLICA_FETCH_MAX_BYTES: 103809024
      KAFKA_UNCLEAN_LEADER_ELECTION_ENABLE: "false"
      KAFKA_ZOOKEEPER_CONNECT: 192.168.33.71:2181,192.168.33.72:2181,192.168.33.74:2181
    image: hyperledger/fabric-kafka:x86_64-0.4.6
    networks:
      blockchain_net: null
    ports:
    - target: 9092
  kafka2:
    container_name: kafka2
    depends_on:
    - zookeeper0
    - zookeeper1
    - zookeeper2
    deploy:
      placement:
        constraints:
        - node.hostname == localhost.localdomain
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      KAFKA_BROKER_ID: 2
      KAFKA_DEFAULT_REPLICATION_FACTOR: 3
      KAFKA_MESSAGE_MAX_BYTES: 103809024
      KAFKA_MIN_INSYNC_REPLICAS: 2
      KAFKA_REPLICA_FETCH_MAX_BYTES: 103809024
      KAFKA_UNCLEAN_LEADER_ELECTION_ENABLE: "false"
      KAFKA_ZOOKEEPER_CONNECT: 192.168.33.71:2181,192.168.33.72:2181,192.168.33.74:2181
    image: hyperledger/fabric-kafka:x86_64-0.4.6
    networks:
      blockchain_net: null
    ports:
    - target: 9092
  kafka3:
    container_name: kafka3
    depends_on:
    - zookeeper0
    - zookeeper1
    - zookeeper2
    deploy:
      placement:
        constraints:
        - node.hostname == dev-040
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      KAFKA_BROKER_ID: 3
      KAFKA_DEFAULT_REPLICATION_FACTOR: 3
      KAFKA_MESSAGE_MAX_BYTES: 103809024
      KAFKA_MIN_INSYNC_REPLICAS: 2
      KAFKA_REPLICA_FETCH_MAX_BYTES: 103809024
      KAFKA_UNCLEAN_LEADER_ELECTION_ENABLE: "false"
      KAFKA_ZOOKEEPER_CONNECT: 192.168.33.71:2181,192.168.33.72:2181,192.168.33.74:2181
    image: hyperledger/fabric-kafka:x86_64-0.4.6
    networks:
      blockchain_net: null
    ports:
    - target: 9092
  orderer:
    command: orderer
    container_name: orderer.simple.com
    depends_on:
    - kafka0
    - kafka1
    - kafka2
    - kafka3
    - zookeeper0
    - zookeeper1
    - zookeeper2
    deploy:
      placement:
        constraints:
        - node.role == manager
      resources:
        limits:
          cpus: '0.5'
      restart_policy:
        condition: on-failure
    environment:
      GRPC_TRACE: all=true,
      GRPC_VERBOSITY: debug
      ORDERER_GENERAL_AUTHENTICATION_TIMEWINDOW: 3600s
      ORDERER_GENERAL_GENESISFILE: /etc/hyperledger/configtx/genesis.block
      ORDERER_GENERAL_GENESISMETHOD: file
      ORDERER_GENERAL_LISTENADDRESS: 0.0.0.0
      ORDERER_GENERAL_LOCALMSPDIR: /etc/hyperledger/msp/orderer/msp
      ORDERER_GENERAL_LOCALMSPID: OrdererMSP
      ORDERER_GENERAL_LOGLEVEL: debug
      ORDERER_GENERAL_TLS_CERTIFICATE: /etc/hyperledger/msp/orderer/tls/server.crt
      ORDERER_GENERAL_TLS_CLIENTAUTHREQUIRED: "false"
      ORDERER_GENERAL_TLS_CLIENTROOTCAS: '[/etc/hyperledger/msp/peerOrg1/msp/tlscacerts/tlsca.org1.foo.com-cert.pem,
        /etc/hyperledger/msp/peerOrg2/msp/tlscacerts/tlsca.org2.bar.com-cert.pem]'
      ORDERER_GENERAL_TLS_ENABLED: "false"
      ORDERER_GENERAL_TLS_PRIVATEKEY: /etc/hyperledger/msp/orderer/tls/server.key
      ORDERER_GENERAL_TLS_ROOTCAS: '[/etc/hyperledger/msp/orderer/tls/ca.crt]'
      ORDERER_KAFKA_RETRY_SHORTINTERVAL: 1s
      ORDERER_KAFKA_RETRY_SHORTTOTAL: 30s
      ORDERER_KAFKA_VERBOSE: "true"
    image: hyperledger/fabric-orderer:x86_64-1.1.0
    networks:
      blockchain_net:
        aliases:
        - orderer.simple.com
    ports:
    - published: 7050
      target: 7050
    volumes:
    - /opt/gopath/src/github.com/hyperledger/fabric/network_resources/dev/swarm/fabric-configs/v1.1/channel-artifacts:/etc/hyperledger/configtx:ro
    - /opt/gopath/src/github.com/hyperledger/fabric/network_resources/dev/swarm/fabric-configs/v1.1/crypto-config/ordererOrganizations/simple.com/orderers/orderer.simple.com:/etc/hyperledger/msp/orderer:ro
    - /opt/gopath/src/github.com/hyperledger/fabric/network_resources/dev/swarm/fabric-configs/v1.1/crypto-config/peerOrganizations/org1.foo.com/peers/peer0.org1.foo.com:/etc/hyperledger/msp/peerOrg1:ro
    - /opt/gopath/src/github.com/hyperledger/fabric/network_resources/dev/swarm/fabric-configs/v1.1/crypto-config/peerOrganizations/org2.bar.com/peers/peer0.org2.bar.com:/etc/hyperledger/msp/peerOrg2:ro
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric
  peer0-org1:
    command: peer node start
    container_name: peer0.org1.foo.com
    depends_on:
    - couchdb0
    - orderer
    deploy:
      placement:
        constraints:
        - node.hostname == dev-010
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS: couchdb0:5984
      CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD: ''
      CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME: ''
      CORE_LEDGER_STATE_STATEDATABASE: CouchDB
      CORE_LOGGING_LEVEL: DEBUG
      CORE_PEER_ADDRESS: peer0.org1.foo.com:7051
      CORE_PEER_AUTHENTICATION_TIMEWINDOW: 3600s
      CORE_PEER_CHAINCODEADDRESS: peer0.org1.foo.com:7052
      CORE_PEER_CHAINCODELISTENADDRESS: 0.0.0.0:7052
      CORE_PEER_CHANNELSERVICE_ENABLED: "true"
      CORE_PEER_ENDORSER_ENABLED: "true"
      CORE_PEER_EVENTS_ADDRESS: 0.0.0.0:7053
      CORE_PEER_EVENTS_TIMEWINDOW: 3600s
      CORE_PEER_GOSSIP_BOOTSTRAP: peer1.org1.foo.com:7051
      CORE_PEER_GOSSIP_ENDPOINT: peer0.org1.foo.com:7051
      CORE_PEER_GOSSIP_EXTERNALENDPOINT: peer0.org1.foo.com:7051
      CORE_PEER_GOSSIP_ORGLEADER: "false"
      CORE_PEER_GOSSIP_SKIPHANDSHAKE: "true"
      CORE_PEER_GOSSIP_USELEADERELECTION: "true"
      CORE_PEER_ID: peer0.org1.foo.com
      CORE_PEER_LOCALMSPID: Org1MSP
      CORE_PEER_MSPCONFIGPATH: /etc/hyperledger/msp/peer/msp
      CORE_PEER_PROFILE_ENABLED: "false"
      CORE_PEER_TLS_CERT_FILE: /etc/hyperledger/msp/peer/tls/server.crt
      CORE_PEER_TLS_CLIENTAUTHREQUIRED: "false"
      CORE_PEER_TLS_CLIENTROOTCAS_FILES: /etc/hyperledger/msp/peer/msp/tlscacerts/tlsca.org1.foo.com-cert.pem
      CORE_PEER_TLS_ENABLED: "false"
      CORE_PEER_TLS_KEY_FILE: /etc/hyperledger/msp/peer/tls/server.key
      CORE_PEER_TLS_ROOTCERT_FILE: /etc/hyperledger/msp/peer/tls/ca.crt
      CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE: fabric_blockchain_net
      CORE_VM_ENDPOINT: unix:///host/var/run/docker.sock
    image: hyperledger/fabric-peer:x86_64-1.1.0
    networks:
      blockchain_net:
        aliases:
        - peer0.org1.foo.com
    ports:
    - published: 7051
      target: 7051
    - published: 7052
      target: 7052
    - published: 7053
      target: 7053
    volumes:
    - /opt/gopath/src/github.com/hyperledger/fabric/network_resources/dev/swarm/fabric-configs/v1.1/crypto-config/peerOrganizations/org1.foo.com/peers/peer0.org1.foo.com:/etc/hyperledger/msp/peer:ro
    - /var/run:/host/var/run:rw
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
  peer0-org2:
    command: peer node start
    container_name: peer0.org2.bar.com
    depends_on:
    - couchdb2
    - orderer
    deploy:
      placement:
        constraints:
        - node.hostname == localhost.localdomain
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS: couchdb2:5984
      CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD: ''
      CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME: ''
      CORE_LEDGER_STATE_STATEDATABASE: CouchDB
      CORE_LOGGING_LEVEL: DEBUG
      CORE_PEER_ADDRESS: peer0.org2.bar.com:7051
      CORE_PEER_AUTHENTICATION_TIMEWINDOW: 3600s
      CORE_PEER_CHAINCODEADDRESS: peer0.org2.bar.com:7052
      CORE_PEER_CHAINCODELISTENADDRESS: 0.0.0.0:7052
      CORE_PEER_CHANNELSERVICE_ENABLED: "true"
      CORE_PEER_ENDORSER_ENABLED: "true"
      CORE_PEER_EVENTS_ADDRESS: 0.0.0.0:7053
      CORE_PEER_EVENTS_TIMEWINDOW: 3600s
      CORE_PEER_GOSSIP_BOOTSTRAP: peer1.org2.bar.com:7051
      CORE_PEER_GOSSIP_ENDPOINT: peer0.org2.bar.com:7051
      CORE_PEER_GOSSIP_EXTERNALENDPOINT: peer0.org2.bar.com:7051
      CORE_PEER_GOSSIP_ORGLEADER: "false"
      CORE_PEER_GOSSIP_SKIPHANDSHAKE: "true"
      CORE_PEER_GOSSIP_USELEADERELECTION: "true"
      CORE_PEER_ID: peer0.org2.bar.com
      CORE_PEER_LOCALMSPID: Org2MSP
      CORE_PEER_MSPCONFIGPATH: /etc/hyperledger/msp/peer/msp
      CORE_PEER_PROFILE_ENABLED: "false"
      CORE_PEER_TLS_CERT_FILE: /etc/hyperledger/msp/peer/tls/server.crt
      CORE_PEER_TLS_CLIENTAUTHREQUIRED: "false"
      CORE_PEER_TLS_CLIENTROOTCAS_FILES: /etc/hyperledger/msp/peer/msp/tlscacerts/tlsca.org2.bar.com-cert.pem
      CORE_PEER_TLS_ENABLED: "false"
      CORE_PEER_TLS_KEY_FILE: /etc/hyperledger/msp/peer/tls/server.key
      CORE_PEER_TLS_ROOTCERT_FILE: /etc/hyperledger/msp/peer/tls/ca.crt
      CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE: fabric_blockchain_net
      CORE_VM_ENDPOINT: unix:///host/var/run/docker.sock
    image: hyperledger/fabric-peer:x86_64-1.1.0
    networks:
      blockchain_net:
        aliases:
        - peer0.org2.bar.com
    ports:
    - published: 8051
      target: 7051
    - published: 8052
      target: 7052
    - published: 8053
      target: 7053
    volumes:
    - /opt/gopath/src/github.com/hyperledger/fabric/network_resources/dev/swarm/fabric-configs/v1.1/crypto-config/peerOrganizations/org2.bar.com/peers/peer0.org2.bar.com:/etc/hyperledger/msp/peer:ro
    - /var/run:/host/var/run:rw
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
  peer1-org1:
    command: peer node start
    container_name: peer1.org1.foo.com
    depends_on:
    - couchdb1
    - orderer
    - peer0-org1
    deploy:
      placement:
        constraints:
        - node.hostname == dev-020
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS: couchdb1:5984
      CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD: ''
      CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME: ''
      CORE_LEDGER_STATE_STATEDATABASE: CouchDB
      CORE_LOGGING_LEVEL: DEBUG
      CORE_PEER_ADDRESS: peer1.org1.foo.com:7051
      CORE_PEER_AUTHENTICATION_TIMEWINDOW: 3600s
      CORE_PEER_CHAINCODEADDRESS: peer1.org1.foo.com:7052
      CORE_PEER_CHAINCODELISTENADDRESS: 0.0.0.0:7052
      CORE_PEER_CHANNELSERVICE_ENABLED: "true"
      CORE_PEER_ENDORSER_ENABLED: "true"
      CORE_PEER_EVENTS_ADDRESS: 0.0.0.0:7053
      CORE_PEER_EVENTS_TIMEWINDOW: 3600s
      CORE_PEER_GOSSIP_BOOTSTRAP: peer0.org1.foo.com:7051
      CORE_PEER_GOSSIP_ENDPOINT: peer1.org1.foo.com:7051
      CORE_PEER_GOSSIP_EXTERNALENDPOINT: peer1.org1.foo.com:7051
      CORE_PEER_GOSSIP_ORGLEADER: "false"
      CORE_PEER_GOSSIP_SKIPHANDSHAKE: "true"
      CORE_PEER_GOSSIP_USELEADERELECTION: "true"
      CORE_PEER_ID: peer1.org1.foo.com
      CORE_PEER_LOCALMSPID: Org1MSP
      CORE_PEER_MSPCONFIGPATH: /etc/hyperledger/msp/peer/msp
      CORE_PEER_PROFILE_ENABLED: "false"
      CORE_PEER_TLS_CERT_FILE: /etc/hyperledger/msp/peer/tls/server.crt
      CORE_PEER_TLS_CLIENTAUTHREQUIRED: "false"
      CORE_PEER_TLS_CLIENTROOTCAS_FILES: /etc/hyperledger/msp/peer/msp/tlscacerts/tlsca.org1.foo.com-cert.pem
      CORE_PEER_TLS_ENABLED: "false"
      CORE_PEER_TLS_KEY_FILE: /etc/hyperledger/msp/peer/tls/server.key
      CORE_PEER_TLS_ROOTCERT_FILE: /etc/hyperledger/msp/peer/tls/ca.crt
      CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE: fabric_blockchain_net
      CORE_VM_ENDPOINT: unix:///host/var/run/docker.sock
    image: hyperledger/fabric-peer:x86_64-1.1.0
    networks:
      blockchain_net:
        aliases:
        - peer1.org1.foo.com
    ports:
    - published: 7056
      target: 7051
    - published: 7057
      target: 7052
    - published: 7058
      target: 7053
    volumes:
    - /opt/gopath/src/github.com/hyperledger/fabric/network_resources/dev/swarm/fabric-configs/v1.1/crypto-config/peerOrganizations/org1.foo.com/peers/peer1.org1.foo.com:/etc/hyperledger/msp/peer:ro
    - /var/run:/host/var/run:rw
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
  peer1-org2:
    command: peer node start
    container_name: peer1.org2.bar.com
    depends_on:
    - couchdb3
    - orderer
    - peer0-org2
    deploy:
      placement:
        constraints:
        - node.hostname == dev-040
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS: couchdb3:5984
      CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD: ''
      CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME: ''
      CORE_LEDGER_STATE_STATEDATABASE: CouchDB
      CORE_LOGGING_LEVEL: DEBUG
      CORE_PEER_ADDRESS: peer1.org2.bar.com:7051
      CORE_PEER_AUTHENTICATION_TIMEWINDOW: 3600s
      CORE_PEER_CHAINCODEADDRESS: peer1.org2.bar.com:7052
      CORE_PEER_CHAINCODELISTENADDRESS: 0.0.0.0:7052
      CORE_PEER_CHANNELSERVICE_ENABLED: "true"
      CORE_PEER_ENDORSER_ENABLED: "true"
      CORE_PEER_EVENTS_ADDRESS: 0.0.0.0:7053
      CORE_PEER_EVENTS_TIMEWINDOW: 3600s
      CORE_PEER_GOSSIP_BOOTSTRAP: peer0.org2.bar.com:7051
      CORE_PEER_GOSSIP_ENDPOINT: peer1.org2.bar.com:7051
      CORE_PEER_GOSSIP_EXTERNALENDPOINT: peer1.org2.bar.com:7051
      CORE_PEER_GOSSIP_ORGLEADER: "false"
      CORE_PEER_GOSSIP_SKIPHANDSHAKE: "true"
      CORE_PEER_GOSSIP_USELEADERELECTION: "true"
      CORE_PEER_ID: peer1.org2.bar.com
      CORE_PEER_LOCALMSPID: Org2MSP
      CORE_PEER_MSPCONFIGPATH: /etc/hyperledger/msp/peer/msp
      CORE_PEER_PROFILE_ENABLED: "false"
      CORE_PEER_TLS_CERT_FILE: /etc/hyperledger/msp/peer/tls/server.crt
      CORE_PEER_TLS_CLIENTAUTHREQUIRED: "false"
      CORE_PEER_TLS_CLIENTROOTCAS_FILES: /etc/hyperledger/msp/peer/msp/tlscacerts/tlsca.org2.bar.com-cert.pem
      CORE_PEER_TLS_ENABLED: "false"
      CORE_PEER_TLS_KEY_FILE: /etc/hyperledger/msp/peer/tls/server.key
      CORE_PEER_TLS_ROOTCERT_FILE: /etc/hyperledger/msp/peer/tls/ca.crt
      CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE: fabric_blockchain_net
      CORE_VM_ENDPOINT: unix:///host/var/run/docker.sock
    image: hyperledger/fabric-peer:x86_64-1.1.0
    networks:
      blockchain_net:
        aliases:
        - peer1.org2.bar.com
    ports:
    - published: 8056
      target: 7051
    - published: 8057
      target: 7052
    - published: 8058
      target: 7053
    volumes:
    - /opt/gopath/src/github.com/hyperledger/fabric/network_resources/dev/swarm/fabric-configs/v1.1/crypto-config/peerOrganizations/org2.bar.com/peers/peer1.org2.bar.com:/etc/hyperledger/msp/peer:ro
    - /var/run:/host/var/run:rw
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
  zookeeper0:
    container_name: zookeeper0
    deploy:
      placement:
        constraints:
        - node.hostname == dev-010
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      ZOO_MY_ID: 1
      ZOO_SERVERS: server.1=0.0.0.0:2888:3888 server.2=192.168.33.72:2888:3888 server.3=192.168.33.74:2888:3888
    image: hyperledger/fabric-zookeeper:x86_64-0.4.6
    networks:
      blockchain_net: null
    ports:
    - mode: host
      protocol: tcp
      published: 2181
      target: 2181
    - mode: host
      protocol: tcp
      published: 2888
      target: 2888
    - mode: host
      protocol: tcp
      published: 3888
      target: 3888
  zookeeper1:
    container_name: zookeeper1
    deploy:
      placement:
        constraints:
        - node.hostname == dev-020
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      ZOO_MY_ID: 2
      ZOO_SERVERS: server.1=192.168.33.71:2888:3888 server.2=0.0.0.0:2888:3888 server.3=192.168.33.74:2888:3888
    image: hyperledger/fabric-zookeeper:x86_64-0.4.6
    networks:
      blockchain_net: null
    ports:
    - mode: host
      protocol: tcp
      published: 2181
      target: 2181
    - mode: host
      protocol: tcp
      published: 2888
      target: 2888
    - mode: host
      protocol: tcp
      published: 3888
      target: 3888
  zookeeper2:
    container_name: zookeeper2
    deploy:
      placement:
        constraints:
        - node.hostname == dev-040
      resources:
        limits:
          cpus: '0.25'
      restart_policy:
        condition: on-failure
    environment:
      ZOO_MY_ID: 3
      ZOO_SERVERS: server.1=192.168.33.71:2888:3888 server.2=192.168.33.72:2888:3888
        server.3=0.0.0.0:2888:3888
    image: hyperledger/fabric-zookeeper:x86_64-0.4.6
    networks:
      blockchain_net: null
    ports:
    - mode: host
      protocol: tcp
      published: 2181
      target: 2181
    - mode: host
      protocol: tcp
      published: 2888
      target: 2888
    - mode: host
      protocol: tcp
      published: 3888
      target: 3888
version: '3.6'

